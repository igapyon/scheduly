# Screen Overview

Scheduly の React 版 UI は現状、次の 3 画面で構成されます。ここでは役割と主要要素、画面間の関係を簡潔に整理します。すべて `src/frontend/` に JSX 実装があり、`public/*.html` からエントリーポイントとして読み込まれます。

## 管理画面（Admin Console）

- **エントリ**: `src/frontend/admin.jsx` / HTML: `public/index.html`
- **目的**: プロジェクト情報の編集、候補日（イベント）管理、ICS のインポート／エクスポート、共有 URL の生成など主催者向け操作をまとめる。
- **主要 UI**:
  - プロジェクト情報フォーム（タイトル・説明）
  - 候補日カード（確定／仮／取消しラベル、日時、場所、メモ）
  - ICS 個別／一括エクスポート、ICS インポートプレビュー
  - 共有 URL（管理者／参加者）生成と表示
- **データ入出力**:
  - 内部 state に候補リストを保持。ICS インポートで JSON に変換 → state 更新。
  - エクスポート時に state から ICS を生成。
  - 共有 URL はダミー生成（現時点では実 Persist なし）。

## 参加者一覧画面（Participant Dashboard）

- **エントリ**: `src/frontend/user.jsx` / HTML: `public/user.html`
- **目的**: 参加者が全候補の概要や回答サマリーを確認し、ステータスごとの出欠状況を把握できるようにする。
- **主要 UI**:
  - 「日程ごと」「参加者ごと」のタブ切り替え
  - 各候補日カード：日付・時間・場所・説明・回答サマリー（○△×）
  - 個別参加者の回答一覧（参加者ごとのタブ時）
- **データ入出力**:
  - 画面初期表示時にサンプル ICS を fetch → 解析 → 表示用データに整形。
  - 参加者回答は現在モックデータ。将来的には回答 API から取得する想定。

## 参加者回答編集画面（Participant Edit）

- **エントリ**: `src/frontend/user-edit.jsx` / HTML: `public/user-edit.html`
- **目的**: 個別参加者が候補日に対して ○△× やコメントを入力し、回答を保存できるようにする。
- **主要 UI**:
  - 選択中候補の詳細（日時、場所、サマリー）
  - ○△× の選択ボタン、コメント入力欄
  - 日程一覧の出欠サマリー（サイドバー）
  - 保存／キャンセル操作（モックではトースト表示のみ）
- **データ入出力**:
  - 初期値としてサンプル ICS とモック回答を読み込み。
  - 選択状態・コメントはクライアント側の state に保持。実保存先は未実装。

## 参加者回答管理ビュー（計画中）

- **位置付け**: `user.jsx`（参加者一覧画面）を拡張し、管理者が回答状況を俯瞰・編集できるビューを追加する構想。
- **目的**:
  - 参加者ごとの回答を検索・フィルタリングし、候補別の賛否を素早く把握する。
  - 確定候補を決める際の判断材料として、マトリクス集計や詳細カードを提供する。
  - 必要に応じて管理者が回答を修正したりコメントを追記したりできる導線を用意する。
- **レイアウト案**:
  1. 上部コントロールでプロジェクト概要・フィルター・検索を配置。
  2. メイン領域に「参加者 × 候補」のマトリクスと、クリック時に開く詳細カードを表示。
  3. サイドパネルに候補ごとの集計（○△×の数、コメント有無、確定操作）を置く。モバイルでは縦積みにし、マトリクスを横スクロール対応にする。
- **データモデルのメモ**:
  - `Participant`, `Response`, `Slot`（候補）を組み合わせてマトリクスを構成する。`Response.mark` は `'o' | 'd' | 'x' | null`。
  - 現在はフロント内のモックとして保持し、将来的に REST API で永続化する想定。
- **今後の実装ステップ**:
  1. React state を活用した UI モックを作成し、既存データを可視化。
  2. 管理者が回答を修正できるアクションを追加。
  3. ICS 連携や通知フローと連動させる。
  4. サーバー/API 実装時に CRUD と認証を整備。
- **補足**:
  - 参加者が自己編集できる前提では、履歴管理やアラートも必要になる可能性がある。
  - 大規模プロジェクト向けに仮想スクロールやページネーションなどのパフォーマンス対策を検討する。

## 画面間の関係

1. **管理画面**で候補やプロジェクト情報を編集し、参加者向け URL を発行する。
2. 参加者は共有された **参加者一覧画面**で概要を確認し、必要に応じて **参加者回答編集画面**へ遷移して回答する。
3. 完成形では、回答結果を **管理画面**が集計し、候補ごとの出欠が更新される想定。

現状は画面間のデータ同期がモック状態で、各画面がサンプルデータを個別に読み込む構成。実装を進める際は共有データレイヤー（REST API、擬似サーバー、あるいは IndexedDB など）を用意し、同じデータモデルを参照することが必要になる。
