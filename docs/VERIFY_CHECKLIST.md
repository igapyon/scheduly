# VERIFY CHECKLIST

Scheduly のモックを目視確認するときに使う QA チェックリストです。対象は `public/legacy/` 配下の HTML（特に `scheduly-admin-mock.html`）をブラウザで開いた際の動作確認を想定しています。進行中の作業メモや TODO は `docs/DEVELOPER_NOTES.md` を参照してください。

## 事前準備

- 最新のコードを反映したうえで、Chrome などモダンなブラウザで HTML ファイルを直接開く。
- Chrome DevTools（mac: `⌥ ⌘ I`, Windows: `Ctrl` + `Shift` + `I` or `F12`）の Console を開き、ログを常時確認できる状態にしておく。

## 共通チェック

- [ ] 初期表示で UI が崩れていないか、候補一覧・共有 URL・プロジェクト設定など主要セクションが描画されているか。
- [ ] 画面を操作した際に Console にエラーや警告が出ていないか。
  - エラーを見つけたらスクリーンショットかログを控え、再現手順をメモする。

## 日程編集

- [ ] 各日程カードで「ICS詳細」ダイアログが開くことを確認する（閉じた後も状態が維持されるか）。
- [ ] タイトルや場所、説明などの入力値を変更した後、ほかの UI と競合なく保持されているか。
- [ ] 「日程を追加」→ 追加した日程がリスト末尾に出現し、削除ボタンで個別に消せるか（候補が 1 件だけになった場合は削除不可になっているか）。

## ICS エクスポート

- [ ] 候補ごとの「ICS」ボタンで `.ics` ファイルがダウンロードされるか（モックのため Blob ダウンロードが発火するだけで十分）。
- [ ] ダウンロード直後に Console に警告が出ていないか。
- [ ] 「ICSを一括ダウンロード」で全候補分のファイルが生成されるか。候補が 0 件のときはバリデーションとしてトーストが出るか。

## ICS インポート

- [ ] 「ICSから追加」→ ファイル選択後にプレビューが表示され、UID/DTSTAMP の比較結果が一覧化されるか。
- [ ] プレビュー内でチェックを入れた候補だけが反映される（更新／追加の件数がトーストの文面と一致する）か。
- [ ] UID なし・DTSTAMP なしの VEVENT が存在する場合にスキップ扱いとして通知されるか。

## その他

- [ ] トースト通知が詰まらず一度に 1 件ずつ表示されるか、数秒後に自動で消えるか。
- [ ] 共有 URL の欄や管理アクション（削除ボタン）が想定どおりダミー挙動になっているか。
- [ ] 画面リロード後も初期候補が正しく復元されるか（ブラウザリロード後に Console にエラーがないか）。

---

## React/webpack 版（dev サーバ）追加チェック

事前: `npm run dev` を起動し、`http://localhost:5173/index.html`（管理）/`http://localhost:5173/user.html`（参加者）で確認する。Console を常時表示。

### 管理 UI: デモプロジェクト導入
- [ ] 管理アクション →「デモ用プロジェクトをインポート」をクリックし、確認で OK。タイトル/候補がデモ内容に置き換わるか。
- [ ] 直後に「プロジェクトをエクスポート」で JSON がダウンロードできるか。Console にエラーが出ていないか。

### About ボタンの挙動
- [ ] `index.html` と `user.html` の右上「About」をクリックし、新しいタブ/ウィンドウで `/about.html` が開くか（`target="_blank"`）。

### 回答（Responses）入力バリデーション
- [ ] 参加者画面で「回答」を開き、コメントを 501 文字以上にして保存した場合に拒否される（Console に 422 相当エラー）か。
- [ ] 記号（○/△/×/ー 以外）を送信すると拒否される（Console に 422 相当エラー）か。

### 候補（Candidates）編集バリデーション
- [ ] 管理画面で候補の開始/終了を編集し、終了 ≤ 開始 の場合に保存が拒否される（Console に 422 相当エラー）か。
- [ ] タイトル/場所/説明に極端な長文を入れた場合、拒否される（どのフィールドかがメッセージに含まれる）か。

### 参加者（Participants）編集バリデーション
- [ ] 参加者名が空の追加/更新を拒否するか（Console に 422 相当エラー）。
- [ ] 不正なメール形式（例: `foo`）を拒否するか（Console に 422 相当エラー）。

### 環境変数の注入（任意）
- [ ] `BASE_URL` / `API_BASE_URL` を設定して dev を起動してもビルドが通るか。`getConfig()` で値が取得できるか。

---

## 参加者 UI（Inline 編集）チェック

- [ ] 回答（○/△/×）のクリックで即保存され、ステータス「保存しました」が表示されるか。
- [ ] コメントは入力中は保存されず、フォーカスを外したときに保存されるか。
- [ ] コメントが500文字を超える場合、保存されず赤枠＋「コメントは500文字以内で入力してください」が表示され、Console に 422 相当の debug ログが出るか（error は出ない）。
- [ ] コメント500文字以内に戻すと赤枠が消え、保存成功メッセージに変わるか。

## 管理 UI（日時編集）チェック

- [ ] `datetime-local` 入力途中（未完成値）では保存ブロックやエラーが出ないか（入力が継続できる）。
- [ ] `dtend ≤ dtstart` の完成値を入れた場合でも、入力は保持されたまま赤枠＋トーストで通知されるか（編集継続可）。

## 参考

- `downloadtest.html` を使うと、ブラウザが Blob 生成からのダウンロードを処理できるかを単体で確認できます。
- ここに挙げたチェック項目の実施結果は、可能であれば日付と担当者名を残すと追跡しやすくなります。
