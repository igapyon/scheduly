# 外部仕様の前提・制約（通常のWebアプリと異なる方式）
<!-- file moved to concept-assumptions.md by docs prefix policy -->
本ドキュメントは、Scheduly の「外部仕様」観点で、一般的なWebアプリと比較して異なる方式（非機能・設計原則）に限定して要点をまとめる。内部実装やAPI詳細、UIフローの説明は含めない。

---

## スコープ
- 本書は方式の特徴のみを列挙し、内部構造・データモデル・画面仕様の詳細は扱わない。
- 参照先（内部仕様）: `docs/internal/concept-architecture.md`、`docs/internal/spec-data-model.md`、`docs/internal/spec-api-flow.md`、`docs/internal/DEVELOPER_NOTES.md`。

---

## アクセスモデル（秘密URL = 簡易な認証・認可）
- 管理者URLと参加者URLを「秘密鍵」に見立て、URL所持者のみが該当画面へアクセス可能とする。
- ユーザアカウント、ログイン、権限ロールといった一般的な認証・認可機構は提供しない。
- 共有トークンにより画面を出し分ける（例: 管理画面 `/a/{token}`、参加者画面 `/p/{token}`）。
- URL漏洩はそのまま不正利用リスクに直結するため、共有・保管は利用者側のオペレーション前提とする。

---

## データ永続化（インメモリ・揮発）
- サーバ側永続ストレージ（DB/オブジェクトストレージ）は使用しない設計。
- プロセス（サーバ）が停止した時点でデータは揮発する前提とする。
- 長期保存や履歴保持はプロダクトのスコープ外。必要に応じてエクスポート（ICS / JSON など）での外部保全を想定。

---

## 保存方式（リアルタイム保存）
- 入力・操作は基本的にリアルタイムで保存される（バッファリングや明示的な「保存ボタン」に依存しない）。
- 参加者の回答（○/△/×・コメント）など、即時に反映される操作が多い。
- 同時編集時の競合回避は最小限の前提で、最新の入力をできる限り失わないことを重視する。

---

## 入力値バリデーション（寛容・保存優先）
- 形式や長さ、列挙値などの「軽量検証」は行うが、通過後は基本的にサーバが値を受け入れて記憶する。
- 時間順序の不整合など、実務的に問題があっても「値は保持」し、UI側での可視化（赤枠、トースト等）で利用者に判断を委ねる。
- いわゆる厳格なサーバサイド拒否（400/422で弾く）を多用せず、編集の連続性を優先する。

---

## セキュリティ前提と注意喚起
- 認証・承認を持たないため、秘密URLの管理がセキュリティの要となる。
- 共有トークンが第三者に知られた場合、閲覧・編集が可能になる。
- セキュアな運用が必要な場合は、別途の認証・アクセス制御を外付けで導入することを前提とする。

---

## 想定利用パターン
- 小規模・短期間の調整を迅速に行う用途（「セットアップ不要・すぐ使える」体験）。
- データの長期保存が不要、またはエクスポートで十分に事足りる場面。

---

## 非目標（Non-goals）
- 恒久的なデータ永続化・強固な履歴管理。
- 組織的ユーザ管理（SSO、権限ロール、監査ログ等）。
- 厳格なトランザクション分離レベルや強い整合性保証。
