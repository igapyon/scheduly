# Contributing Guide

Scheduly へ貢献いただく際の基本的な流れとルールをまとめます。初めての方でも迷わず参加できるよう、環境構築から Pull Request 提出までの手順を簡潔に記載しています。

## 開発環境の準備

1. リポジトリを fork / clone する  
   ```bash
   git clone https://github.com/igapyon/scheduly.git
   cd scheduly
   ```
2. 依存関係をインストール  
   ```bash
   npm install
   ```
3. `.env` を作成し API ベース URL を指定します（例: `SCHEDULY_API_BASE_URL=http://localhost:4000`）。  
4. API サーバーとフロントエンドを個別のターミナルで起動します。  
   ```bash
   npm run api:dev    # Express in-memory API (port 4000)
   npm run dev        # Webpack dev server (port 5173)
   ```
   - 管理画面: `http://localhost:5173/index.html` → 共有URL発行後は `/a/{token}`。
   - 参加者画面: 管理画面で発行した参加者URL（例: `/p/{token}`）。
   - Chrome DevTools の Console を常時表示し、警告・エラーを必ず確認してください。

## 作業の進め方

- `main` ブランチから派生したトピックブランチを作成し、小さな単位でコミットすることを推奨します（PR 用ドラフトは `pr/*.md` にまとめても OK）。
- 作業ノートや TODO は `docs/internal/DEVELOPER_NOTES.md` に追記し、途中で中断しても再開しやすくしてください。
- 目視確認は `docs/internal/ref-verify-checklist.md` に沿って実施します。必要に応じて手順をアップデートしてください。
- ドキュメント変更のみの場合も README や `docs/` 配下との整合を確認し、リンク切れを出さないようにします。

## コーディング規約・Lint

- ESLint を導入済みです。PR 前に必ず実行し、エラーがないことを確認してください。  
  ```bash
  npm run lint
  ```
- Tailwind クラスは既存のスタイルに合わせて使用し、不要なカスタム CSS を増やさないようにします。
- 非 ASCII 文字を新たに導入する場合は理由をコメントで説明するか、既存の慣習に従ってください。

## テスト・動作確認

- 現状は主に手動確認が中心です。将来自動テストが導入された際は、PR 時に該当コマンドを実行し、結果を共有してください。
- ICS 連携など副作用が大きい機能を触る場合は、再現手順と確認結果を PR 説明に記載してください。
- 共有URLの発行/再発行 → 参加者回答 → エクスポートまでの一連のフローが壊れていないかを最低限チェックしてください。
- さくら VPS などリモート環境での検証手順は `docs/internal/deploy-sakura-vps.md` を参考にし、必要であればフィードバックを追記してください。

## Pull Request

1. PR タイトルと説明には、変更内容・目的・確認手順を明記します。
2. UI の変更がある場合はスクリーンショットや動作確認 GIF を添付するとレビューがスムーズです。
3. 関連する Issue があれば `Closes #123` のように明記してください。
4. レビューコメントには丁寧に対応し、必要であれば追加コミットや説明を加えてください。

## Issue 提案

- バグ報告や改善案は GitHub Issues を利用してください。再現手順・期待する挙動・実際の挙動・ログ/スクリーンショットを記載すると助かります。
- 規模が大きい提案は、まずディスカッションを立ち上げてコンセンサスを取ることを推奨します。

## コントリビューターのクレジット

- プロジェクトに貢献いただいた方は `docs/external/ref-contributors.md` で紹介しています。PR がマージされ次第、必要に応じて追加します。

## 行動ポリシー（要約）

- 外部サービスへの書き込み操作（GitHub への push / PR 作成など）は、メンテナが明示的に依頼した場合のみ行ってください。
- 破壊的操作（履歴改変、大規模削除）は必ず合意を取ってから進めます。
- ネットワークアクセスや環境変更が必要な場合は、手順案を提示して相談してください。

ご協力ありがとうございます。楽しく品質の高いプロジェクトに育てていきましょう！
